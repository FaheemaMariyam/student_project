<!-- <h2>All Students</h2>
<table class="table table-bordered">
    <tr>
        <th>Name</th>
        <th>Roll No</th>
        <th>Email</th>
        <th>Course</th>
        <th>Phone</th>
        <th>Enrollment Date</th>
        <th>Address</th>
        <th>Date of Birth</th>
        <th>Age</th>

        <th>Profile Photo</th>
        <th>Actions</th>
    </tr>
    {% for s in students %}
    <tr>
        <td>{{ s.student_name|default:"Not filled" }}</td>
        <td>{{ s.student_rollno|default:"Not filled" }}</td>
        <td>{{ s.user.email|default:"Not filled" }}</td>
        <td>{{ s.student_course.course_name|default:"Not assigned" }}</td>
        <td>{{ s.phone|default:"Not filled" }}</td>
        <td>{{s.student_enrollment_date |default:"Not filled"}}</td>
        <td>{{s.address|default:"Not filled"}}</td>
        <td>{{s.date_of_birth |default:"Not filled"}}</td>
        <td>{{s.age |default:"Not filled"}}</td>
        <td>
    {% if s.profile_image %}
        <img src="{{ s.profile_image.url }}" alt="Profile Photo" width="80" height="80" style="border-radius: 8px;">
    {% else %}
        No Photo
    {% endif %}
</td>
     <td><a href="{% url 'edit_students' s.pk %}">Edit</a>
    <a href="{% url 'delete_students' s.pk %}" onclick="return confirm('Are you sure you want to delete the profile {{s.student_name}}')">Delete</a></td>
        
    </tr>
    {% endfor %}
</table> -->
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Students</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/students_list.css' %}">
</head>
<body>

<!-- Top Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
    <div class="container">
        <a class="navbar-brand fw-bold" href="#">Admin Dashboard</a>
        <div class="d-flex ms-auto">
            <a href="{% url 'add_students' %}" class="btn btn-success me-2"><i class="bi bi-person-plus"></i> Add Student</a>
            <a href="{% url 'logout' %}" class="btn btn-outline-light"><i class="bi bi-box-arrow-right"></i> Logout</a>
        </div>
    </div>
</nav>

<div class="container my-4">

    <!-- Summary Cards -->
    <div class="row mb-4">
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="card text-center shadow-sm border-0">
                <div class="card-body">
                    <h5 class="card-title text-primary"><i class="bi bi-people-fill"></i> Total Students</h5>
                    <h2 class="fw-bold">{{ students|length }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="card text-center shadow-sm border-0">
                <div class="card-body">
                    <h5 class="card-title text-success"><i class="bi bi-person-plus-fill"></i> New Students</h5>
                    <h2 class="fw-bold">{{ new_students_count }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="card text-center shadow-sm border-0">
                <div class="card-body">
                    <h5 class="card-title text-warning"><i class="bi bi-journal-bookmark-fill"></i> Courses</h5>
                    <h2 class="fw-bold">{{ courses_count }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="card text-center shadow-sm border-0">
                <div class="card-body">
                    <h5 class="card-title text-danger"><i class="bi bi-clock-history"></i> Pending Profiles</h5>
                    <h2 class="fw-bold">{{ pending_profiles_count }}</h2>
                </div>
            </div>
        </div>
    </div>
    <form method="GET" class="d-flex mb-3 position-relative">
    <input type="search" name="q" id="search-input" class="form-control" placeholder="Search by name" value="{{ query|default:'' }}">
    <button type="submit" class="btn btn-primary ms-2">Search</button>
    <span class="clear-search position-absolute top-50 end-0 translate-middle-y me-5" style="cursor:pointer; display:none;">&times;</span>
</form>


    <!-- <ul>
    {% for student in students %}
        <li>{{ student.student_name }} - {{ student.student_rollno }}</li>
    {% empty %}
        <li>No students found.</li>
    {% endfor %}
</ul> -->

    <!-- Students Table -->
    <div class="table-responsive shadow-sm">
        <table class="table table-striped table-hover align-middle">
            <thead class="table-dark text-center">
                <tr>
                    <th>Avatar</th>
                    <th>Name</th>
                    <th>Roll No</th>
                    <th>Email</th>
                    <th>Course</th>
                    <th>Phone</th>
                    <th>Enrollment Date</th>
                    <th>Address</th>
                    <th>DOB</th>
                    <th>Age</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- loop through pagination instead of students -->
                {% for s in students %}
                <tr class="text-center">
                    <td>
                        {% if s.profile_image %}
                            <img src="{{ s.profile_image.url }}" alt="Profile" class="profile-img">
                        {% else %}
                            <span class="text-muted">N/A</span>
                        {% endif %}
                    </td>
                    <td>{{ s.student_name|default:"Not filled" }}</td>
                    <td>{{ s.student_rollno|default:"Not filled" }}</td>
                    <td>{{ s.user.email|default:"Not filled" }}</td>
                    <td>
    {% for course in s.student_course.all %}
        {{ course.course_name }}{% if not forloop.last %}, {% endif %}
    {% empty %}
        Not assigned
    {% endfor %}
</td>
                    <td>{{ s.phone|default:"Not filled" }}</td>
                    <td>{{ s.student_enrollment_date|default:"Not filled" }}</td>
                    <td>{{ s.address|default:"Not filled" }}</td>
                    <td>{{ s.date_of_birth|default:"Not filled" }}</td>
                    <td>{{ s.age|default:"Not filled" }}</td>
                    <td>
                        <a href="{% url 'edit_students' s.pk %}" class="btn btn-sm btn-primary mb-1"><i class="bi bi-pencil-square"></i></a>
                        <a href="{% url 'delete_students' s.pk %}" onclick="return confirm('Are you sure you want to delete {{ s.student_name }}?')" class="btn btn-sm btn-danger mb-1"><i class="bi bi-trash-fill"></i></a>
                       
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="11" class="text-center text-muted">No students found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center mt-3">
        {% if page_obj.has_previous %}
        <li class="page-item">
            <a class="page-link" href="?q={{ query }}&page={{ page_obj.previous_page_number }}">Previous</a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <span class="page-link">Previous</span>
        </li>
        {% endif %}

        {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
            <li class="page-item active">
                <span class="page-link">{{ num }}</span>
            </li>
            {% else %}
            <li class="page-item">
                <a class="page-link" href="?q={{ query }}&page={{ num }}">{{ num }}</a>
            </li>
            {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
        <li class="page-item">
            <a class="page-link" href="?q={{ query }}&page={{ page_obj.next_page_number }}">Next</a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <span class="page-link">Next</span>
        </li>
        {% endif %}
    </ul>
</nav>

    </div>
</div>

</body>
</html>